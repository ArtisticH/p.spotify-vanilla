(()=>{"use strict";const t=new class{constructor(){this.$main=document.getElementById("main"),this.$btns=document.querySelectorAll(".main-btn"),[...this.$btns].forEach((t=>{t.onpointerenter=this.tooltip.bind(this)})),this.$scroll=document.querySelector(".main-scroll"),this.$scroll.onpointerenter=this.scroll.bind(this),this.$scrollBack=document.querySelector(".main-circle-back"),this.$scrollCircle=document.querySelector(".main-circle-arrow"),this.$scroll.onclick=this.scrollDown.bind(this),this.$release=document.getElementById("release"),this.$title=document.querySelector(".main-title"),this.$sub=document.querySelector(".main-sub"),this.$timefooter=document.getElementById("timefooter"),this.$imgArea=document.querySelector(".main-img-area"),this.$img=Array.from(document.querySelectorAll(".main-img-box")),this.$current=document.querySelector(".main-current"),this.$stickFill=document.querySelector(".main-stick-fill"),this._stack=14,this._slide=14,this._translate="translate(-50%, -50%)",this._scale=["scale(0.5)","scale(0.55)","scale(0.6)","scale(0.65)","scale(0.7)","scale(0.75)","scale(0.8)","scale(0.85)","scale(0.9)","scale(0.95)","scale(1)","scale(1)","scale(1)","scale(1)","scale(1)"],this._rotate=["rotate(-3deg)","rotate(4deg)","rotate(-7deg)","rotate(5deg)","rotate(0deg)"],this._sub=["PRODUCT DESIGN","Q+A","BEHIND THE SCENES","BEHIND THE SCENES","PRODUCT DESIGN","DESIGN OPS","BEHIND THE SCENES","PRODUCT DESIGN","PRODUCT DESIGN","BEHIND THE SCENES","DESIGN SYSTEMS","METHODS","BEHIND THE SCENES","Q+A","BEHIND THE SCENES"],this._main=['Beyond "Good Job": How to Give Impactful Feedback',"Ask Spotify Design 06","How to Stand Out as a Spotify Internship Applicant","A Designer's Balancing Act: Staying Creative and Organized in Figma","Finding your T-Shape as a Generalist Designer","Growing, Scaling, and Tuning: Meet Spotify’s Global Head of Design Ops","Backstage Tickets to the World of Service Design at Spotify","Finding your T-Shape as a Specialist Designer","Designing for the World: An Introduction to Localization","From Web Page to Web Player: How Spotify Designed a New Homepage Experience","Can I get an Encore? Spotify’s Design System, Three Years On","Navigating the Discovery Phase","Making Moves: Designing Motion for 2022 Wrapped","Ask Spotify Design 07","Collaboration Secrets: Design X Engineering"],this._backColor=["#ffbc4a","#ffd0d5","#ffd0d5","#ffd0d5","#ffbc4a","#ffbc4a","#ffd0d5","#ffbc4a","#ffbc4a","#ffd0d5","#ffbc4a","#a5c9d8","#ffd0d5","#ffd0d5","#ffd0d5"],this.$header=document.getElementById("header"),this.$navs=document.querySelectorAll(".nav"),this.$next=document.querySelector(".btn-next"),this.$prev=document.querySelector(".btn-prev"),this.$shuffle=document.querySelector(".btn-shuffle"),this._clearSlide=null,this.$prev.onclick=this.prev.bind(this),this.$next.onclick=this.next.bind(this),this.$shuffle.onclick=this.shuffle.bind(this),this._random=null,this.$img.forEach((t=>{t.onpointerdown=this.dragAndDrop.bind(this)})),this._img=null,this._shiftX=null,this._rectLeft=null,this._radio=null,this._dir=null,this.moveAt=this.moveAt.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.decideLeaving=this.decideLeaving.bind(this)}animate({timing:t,draw:e,duration:i}){let s=performance.now();requestAnimationFrame((function o(n){let r=(n-s)/i;r>1&&(r=1);let l=t(r);e(l),r<1&&requestAnimationFrame(o)}))}showMain(){this.$main.style.visibility="visible",this.showCards()}tooltip(t){const e=t.currentTarget,i=e.querySelector(".main-tooltip");i.classList.add("show"),e.onpointerleave=()=>{i.classList.remove("show")}}scroll(t){const e=t.currentTarget;this.$scrollBack.classList.add("show"),this.$scrollCircle.classList.add("show"),e.onpointerleave=()=>{this.$scrollBack.classList.remove("show"),this.$scrollCircle.classList.remove("show")}}scrollDown(){const t=window.pageYOffset,e=this.$release.getBoundingClientRect().top+t;this.animate({duration:200,timing:function(t){return t},draw:i=>{i<=0||window.scrollTo(0,t+(e-t)*i)}})}async showCards(){14===this._slide&&(this.$prev.classList.add("not"),this.$main.style.backgroundColor=`${this._backColor[this._slide]}`,this.$header.style.backgroundColor=`${this._backColor[this._slide]}`,this.$timefooter.style.backgroundColor=`${this._backColor[this._slide]}`,this.$sub.textContent=this._sub[this._slide],this.$title.textContent=this._main[this._slide],this.$current.textContent="01");let t=setInterval((()=>{if(this.$img[this._stack].style.transform=`${this._translate} ${this._scale[this._stack]} ${this._rotate[this._stack%5]}`,this.$img[this._stack].style.left="50%",this._stack--,this._stack<0){clearInterval(t),this.$header.classList.add("show");for(let t of this.$navs)t.classList.add("show");new Promise((t=>{setTimeout((()=>{this.autoSlide(),14===this._slide&&this.$stickFill.classList.add("progress"),t()}),400)}))}}),40)}async autoSlide(){this.$prev.classList.contains("not")&&13===this._slide&&this.$prev.classList.remove("not"),this.$img[this._slide].style.transform="translate(-50%, -50%) scale(1) rotate(0deg)",this.$main.style.backgroundColor=`${this._backColor[this._slide]}`,this.$header.style.backgroundColor=`${this._backColor[this._slide]}`,this.$timefooter.style.backgroundColor=`${this._backColor[this._slide]}`,this.$sub.textContent=this._sub[this._slide],this.$title.textContent=this._main[this._slide],this.$current.textContent=15-this._slide<10?"0"+(15-this._slide):""+(15-this._slide),this._slide>4&&(this.$img[this._slide-5].style.transform=`translate(-50%, -50%) scale(1) ${this._rotate[this._slide%5]}`),new Promise((t=>{this._clearSlide=setTimeout((()=>this._slide>0?(this.$img[this._slide].style.left="200%",this._slide--,t(),this.autoSlide()):0===this._slide?(this._stack=14,this._slide=14,this.$stickFill.classList.remove("progress"),t(),this.showCards()):void 0),5e3)}))}next(){return clearTimeout(this._clearSlide),this._slide>0?(this.$img[this._slide].style.left="200%",this._slide--,this.autoSlide()):0===this._slide?(this._stack=14,this._slide=14,this.$stickFill.classList.remove("progress"),this.showCards()):void 0}prev(){if(14!==this._slide)return 13===this._slide&&this.$prev.classList.add("not"),clearTimeout(this._clearSlide),this._slide++,this.$img[this._slide].style.left="50%",this.$img[this._slide-1].style.transform=`translate(-50%, -50%) scale(1) ${this._rotate[this._slide%5]}`,this._slide>5&&(this.$img[this._slide-6].style.transform=`translate(-50%, -50%) ${this._scale[this._slide]} ${this._rotate[this._slide%5]}`),this.autoSlide();alert("첫 화면입니다")}async shuffle(){clearTimeout(this._clearSlide);let t=setInterval((()=>{this.$img[this._slide].style.left="200%",this._slide--,this._slide<0&&(clearInterval(t),new Promise((t=>{setTimeout((()=>{t(),this.makeShuffle()}),400)})))}),40);this.$sub.textContent="",this.$title.textContent="",this.$stickFill.classList.remove("progress")}makeShuffle(){this._random=[],this.random(),this.shuffleDOM(),this._stack=14,this._slide=14,new Promise((t=>{setTimeout((()=>(t(),this.showCards())),2500)}))}random(){const t=Math.floor(15*Math.random());this._random.includes(t)||(this._random=this._random.concat(t)),15!==this._random.length&&this.random()}shuffleDOM(){const t=new DocumentFragment,e=[],i=[],s=[];for(let o of this._random)t.append(this.$img[o].cloneNode(!0)),e.push(this._main[o]),i.push(this._sub[o]),s.push(this._backColor[o]);for(let t of this.$img)t.remove();this.$imgArea.append(t),this.$img=Array.from(document.querySelectorAll(".main-img-box")),this._main=e,this._sub=i,this._backColor=s}dragAndDrop(t){clearTimeout(this._clearSlide),this.$stickFill.classList.remove("progress"),this._img=t.currentTarget,this._img.style.transform="translate(-50%, -50%) scale(1.1) rotate(0deg)",this._img.style.transition="left 0.1s ease-out, transform 0.3s ease-out",this._img.style.cursor="grabbing",this._img.style.zIndex="1000",this._rectLeft=this._img.getBoundingClientRect().left,this._shiftX=t.clientX-this._rectLeft,this.moveAt(t.clientX),document.addEventListener("pointermove",this.pointerMove),this._img.addEventListener("pointerup",this.pointerUp),this._img.addEventListener("dragstart",(t=>{t.preventDefault()}))}moveAt(t){this._img.style.left=`calc(50% + ${t-this._shiftX-this._rectLeft}px)`}pointerMove(t){this.moveAt(t.clientX)}pointerUp(t){const e=document.documentElement.clientWidth,i=t.clientX-this._shiftX-this._rectLeft;if(i>0?(this._radio=(this._img.getBoundingClientRect().right-e)/e,this._dir="right"):i<0&&(this._radio=(this._img.getBoundingClientRect().width-this._img.getBoundingClientRect().right)/e,this._dir="left"),e<600)this.decideLeaving(.2);else if(e>=600&&e<1024)this.decideLeaving(.05);else if(e>=1024)switch(this._dir){case"right":this.decideLeaving(.1);break;case"left":this.decideLeaving(-.35)}this._img.style.transform="translate(-50%, -50%) scale(1) rotate(0deg)",this._img.style.transition="left 0.4s ease-out, transform 0.3s ease-out",this._img.style.cursor="",this._img.style.zIndex="",document.removeEventListener("pointermove",this.pointerMove),this._img.removeEventListener("pointerup",this.pointerUp)}decideLeaving(t){this._radio>=t?this._slide>0?(this.$img[this._slide].style.left="200%",this._slide--,this.$stickFill.classList.add("progress"),this.autoSlide()):0===this._slide&&(this._stack=14,this._slide=14,this.showCards()):(this._img.style.left="50%",this.$stickFill.classList.add("progress"),this.autoSlide())}},e=new class{constructor(t){this.$introLogo=document.querySelector(".intro-logo"),this.$introFlower=document.querySelector(".intro-flower"),this.init=this.init.bind(this),this.showFlower=this.showFlower.bind(this),this.disappearIntro=this.disappearIntro.bind(this),this.$mainClass=t}animate({timing:t,draw:e,duration:i}){let s=performance.now();requestAnimationFrame((function o(n){let r=(n-s)/i;r>1&&(r=1);let l=t(r);e(l),r<1&&requestAnimationFrame(o)}))}init(){window.scrollTo(0,0),document.body.style.overflowY="hidden",setTimeout(this.showFlower,1500),setTimeout(this.disappearIntro,4500)}showFlower(){this.$introFlower.style.display="block"}disappearIntro(){this.$introLogo.style.display="none",document.body.style.overflowY="",this.animate({duration:500,timing:function(t){return t},draw:t=>{this.$introFlower.style.transform=`translate3d(${-100*t}%, 0, 0) scale(${-.5*t+1})`}}),this.$mainClass.showMain()}}(t);new class{constructor(){this.$menu=document.querySelector(".header-menu"),this.$menu.onclick=this.click.bind(this),this.$lines=document.querySelectorAll(".header-line"),this.$menuBack=document.getElementById("white"),this.$menuText=document.getElementById("text"),this.$broswerWidth=document.documentElement.clientWidth,this._X=null,this.$navs=document.querySelectorAll(".nav"),[...this.$navs].forEach((t=>{t.onpointerenter=this.navIn.bind(this)}))}navIn(t){const e=t.currentTarget,i=e.querySelector(".nav-circle"),s=e.querySelector(".nav-text");i.classList.add("pointer"),s.classList.add("pointer"),e.onpointerleave=()=>{i.classList.remove("pointer"),s.classList.remove("pointer")}}click(){for(let t of this.$lines)t.classList.toggle("clicked");this.$menuBack.classList.toggle("show"),this.$menuText.classList.toggle("show"),this.$menuBack.classList.contains("show")?this._X=!0:this._X=!1,this._X?(document.body.style.overflow="hidden",document.body.style.paddingRight=document.documentElement.clientWidth-this.$broswerWidth+"px",this.$menuText.style.paddingRight=document.documentElement.clientWidth-this.$broswerWidth+"px"):(document.body.style.overflow="",document.body.style.paddingRight="",this.$menuText.style.paddingRight="")}},new class{constructor(){this.$box=document.querySelectorAll(".rel-box"),[...this.$box].forEach((t=>{t.onpointerenter=this.pointer.bind(this)})),this.$tool=document.querySelectorAll(".tool-box"),[...this.$tool].forEach((t=>{t.onpointerenter=this.pointer.bind(this)})),this.$jobs=document.querySelector(".jobs"),this.$jobs.onpointerenter=this.job.bind(this)}pointer(t){const e=t.currentTarget,i=e.querySelector(".rel-title"),s=e.querySelector(".rel-play-btn");i.classList.add("pointer"),s&&s.classList.add("pointer"),e.onpointerleave=()=>{i.classList.remove("pointer"),s&&s.classList.remove("pointer")}}job(t){const e=t.currentTarget,i=e.querySelector(".jobs-arrow"),s=e.querySelector(".jobs-editorial");i.classList.add("pointer"),s.classList.add("pointer"),e.onpointerleave=()=>{i.classList.remove("pointer"),s.classList.remove("pointer")}}},new class{constructor(){this.$view=document.querySelectorAll(".view-box"),[...this.$view].forEach((t=>{t.onpointerenter=this.view.bind(this)}))}view(t){const e=t.currentTarget,i=e.querySelector(".view-title"),s=e.querySelector(".view-title-line"),o=e.querySelector(".view-circle"),n=e.querySelector(".view-arrow");s.classList.contains("back")||(i.classList.add("pointer"),s.classList.add("pointer"),o.classList.add("pointer"),n.classList.add("pointer"),e.onpointerleave=async()=>{i.classList.remove("pointer"),o.classList.remove("pointer"),n.classList.remove("pointer"),s.classList.replace("pointer","back"),await new Promise((t=>{setTimeout((()=>{t()}),200)})),s.classList.remove("back")})}};const i=new class{constructor(){this.$zone=document.querySelector(".spot-event"),this.$zone.onpointerover=this.cursor.bind(this),this.$cursor=document.querySelector(".cursor"),this.$left=document.querySelector(".cursor-left"),this.$right=document.querySelector(".cursor-right"),this.$imgs=Array.from(document.querySelectorAll(".spot-img")),this.$imgs.forEach((t=>{t.onpointerover=this.img.bind(this)})),this.keydown=this.keydown.bind(this),this._marginLeft=null,this._current=0,this._firstLeft=this.$zone.getBoundingClientRect().left,this._firstX=null,this._ratio=null,this.$zone.onpointermove=this.move.bind(this),this.$zone.onpointerout=this.out.bind(this),this.$zone.onpointerdown=this.down.bind(this),this.$zone.onpointerup=this.up.bind(this),this.spotMove=this.spotMove.bind(this),this.spotUp=this.spotUp.bind(this),this.resize=this.resize.bind(this),this.$zone.addEventListener("dragstart",(t=>{t.preventDefault()}))}img(t){const e=t.currentTarget,i=e.parentNode,s=i.parentNode,o=i.querySelector(".spot-svg"),n=i.querySelector(".spot-read");s.style.zIndex="0",o.classList.add("bloom"),n.classList.add("show");for(let t of n.children)t.classList.add("show");this.$cursor.classList.add("over"),this.$left.classList.add("none"),this.$right.classList.add("none");const r=this.$cursor.getBoundingClientRect().width/2;this.$cursor.style.left=t.clientX-r+"px",this.$cursor.style.top=t.clientY-r+"px",e.onpointerout=()=>{s.style.zIndex="",o.classList.remove("bloom"),n.classList.remove("show");for(let t of n.children)t.classList.remove("show");this.$cursor.classList.remove("over"),this.$left.classList.remove("none"),this.$right.classList.remove("none")}}cursor(t){this.$cursor.style.display="flex",this.moveAt(t.clientX,t.clientY)}moveAt(t,e){const i=this.$cursor.getBoundingClientRect().width/2;this.$cursor.style.left=t-i+"px",this.$cursor.style.top=e-i+"px"}move(t){this.moveAt(t.clientX,t.clientY)}out(){this.$cursor.style.display="none",this.$cursor.classList.remove("over"),this.$left.classList.remove("none"),this.$right.classList.remove("none")}down(t){const e=this.$cursor.classList[1];e?"over"===e&&this.$cursor.classList.add("down"):this.$cursor.classList.add("down"),this.$left.classList.add("none"),this.$right.classList.add("none"),this.moveAt(t.clientX,t.clientY),this._marginLeft=this.$zone.getBoundingClientRect().left,this._shiftX=t.clientX-this._marginLeft,this._firstX=t.clientX,this.$zone.style.transition="none",this.spotMoveAt(t.clientX),this.$zone.addEventListener("pointermove",this.spotMove),this.$zone.addEventListener("pointerup",this.spotUp)}spotMove(t){this.spotMoveAt(t.clientX)}spotMoveAt(t){this.$zone.style.marginLeft=-(this._shiftX+this._firstLeft-t)+"px"}up(t){this.$cursor.classList.remove("down"),this.$cursor.classList.remove("down"),this.$left.classList.remove("none"),this.$right.classList.remove("none"),this.moveAt(t.clientX,t.clientY)}spotUp(t){if(this._marginLeft=this.$zone.getBoundingClientRect().left,this.$zone.style.transition="",this._firstX-t.clientX>0){if(11===this._current)return this.$zone.style.marginLeft=`-${this.$imgs[this._current].getBoundingClientRect().left-this._marginLeft}px`,this.$zone.removeEventListener("pointermove",this.spotMove),void this.$zone.removeEventListener("pointerup",this.spotUp);this._ratio=this.$imgs[this._current].getBoundingClientRect().right/this.$imgs[this._current].getBoundingClientRect().width,this._ratio<=.5&&this._current++}else if(this._firstX-t.clientX<0){if(0===this._current)return this.$zone.style.marginLeft=`-${this.$imgs[this._current].getBoundingClientRect().left-this._marginLeft}px`,this.$zone.removeEventListener("pointermove",this.spotMove),void this.$zone.removeEventListener("pointerup",this.spotUp);this._ratio=this.$imgs[this._current-1].getBoundingClientRect().right/this.$imgs[this._current-1].getBoundingClientRect().width,this._ratio>=.5&&this._current--}this.$zone.style.marginLeft=`-${this.$imgs[this._current].getBoundingClientRect().left-this._marginLeft}px`,this.$zone.removeEventListener("pointermove",this.spotMove),this.$zone.removeEventListener("pointerup",this.spotUp)}resize(t){this._marginLeft=this.$zone.getBoundingClientRect().left,this._firstLeft=this.$imgs[this._current].getBoundingClientRect().left,this.$zone.style.marginLeft=`-${this.$imgs[this._current].getBoundingClientRect().left-this._marginLeft}px`}keydown(t){const e=t.key;if(this._marginLeft=this.$zone.getBoundingClientRect().left,"ArrowRight"===e){if(11===this._current)return;this._current++,this.$zone.style.marginLeft=`-${this.$imgs[this._current].getBoundingClientRect().left-this._marginLeft}px`}else if("ArrowLeft"===e){if(0===this._current)return;this._current--,this.$zone.style.marginLeft=`${-this.$imgs[this._current].getBoundingClientRect().left+this._marginLeft}px`}}},s=new class{constructor(){this.$inbox=document.getElementById("inbox"),this.$circle1=document.querySelector(".inbox-circle1"),this.$circle2=document.querySelector(".inbox-circle2"),this.$head=document.querySelector(".inbox-head"),this.$body=document.querySelector(".inbox-body"),this._circle1=this.$circle1.getTotalLength(),this._circle2=this.$circle2.getTotalLength(),this._head=this.$head.getTotalLength(),this._body=this.$body.getTotalLength(),this.ratio=null,this.scroll=this.scroll.bind(this)}scroll(t){this.ratio=(window.pageYOffset+document.documentElement.clientHeight-this.$inbox.offsetTop)/this.$inbox.offsetHeight,this.ratio>=.43&&this.ratio<1.8?(this.$circle1.classList.add("show"),this.$circle2.classList.add("show"),this.$head.classList.add("show"),this.$body.classList.add("show")):(this.ratio>=1.8||this.ratio<.43)&&(this.$circle1.classList.remove("show"),this.$circle2.classList.remove("show"),this.$head.classList.remove("show"),this.$body.classList.remove("show"))}},o=new class{constructor(){this.$hours=Array.from(document.querySelectorAll(".hour")),this.$minutes=Array.from(document.querySelectorAll(".min")),this.$seconds=Array.from(document.querySelectorAll(".second")),this.$box=document.querySelector(".footer-scroll-box"),this.$box.onpointerenter=this.pointer.bind(this),this.$box.onclick=this.click.bind(this)}animate({timing:t,draw:e,duration:i}){let s=performance.now();requestAnimationFrame((function o(n){let r=(n-s)/i;r>1&&(r=1);let l=t(r);e(l),r<1&&requestAnimationFrame(o)}))}init(t,e,i){const s=(new Date).toLocaleString(t,{timeZone:e,hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).split(":");let o=parseInt(s[0]);o<10&&(o="0"+o),this.$hours[i].innerHTML=o;let n=parseInt(s[1]);n<10&&(n="0"+n),this.$minutes[i].innerHTML=n;let r=parseInt(s[2]);r<10&&(r="0"+r),this.$seconds[i].innerHTML=r}time(){this.init("en-US","Europe/Stockholm",0),this.init("en-GB","Europe/London",1),this.init("en-US","America/New_York",2)}pointer(t){const e=t.currentTarget,i=e.querySelector(".footer-scroll-back"),s=e.querySelector(".footer-scroll-img");i.classList.add("pointer"),s.classList.add("pointer"),e.onpointerleave=()=>{i.classList.remove("pointer"),s.classList.remove("pointer")}}click(t){const e=window.pageYOffset;this.animate({duration:300,timing:function(t){return Math.pow(t,2)},draw:t=>{t<=0||window.scrollTo(0,e*(1-t))}})}};document.addEventListener("DOMContentLoaded",e.init),document.body.addEventListener("keydown",i.keydown),window.addEventListener("scroll",i.resize),window.addEventListener("scroll",s.scroll),o.time(),setInterval((()=>{o.time()}),1e3)})();